% This document needs to be compiled by XeLaTeX
% https://www.overleaf.com/learn/latex/XeLaTeX

% XeTeX options inspired by: https://www.fi.muni.cz/lemma/PB029/practices/ceska-sazba-texem/files/xelatex.tex
\usepackage{polyglossia}
\setdefaultlanguage{english}
% \def\uv#1{„#1“}

% TODO: Figure out why -- is not turned to ndash :-(
\usepackage{fontspec}
\defaultfontfeatures{Scale=MatchLowercase,Mapping=tex-text}

\usepackage{amsmath}
\usepackage{mathtools}  % Needed for rightcentered pmatrix* in symetrie.tex
% Math-style ISO turns capital greek letters italic
\usepackage[math-style=ISO,warnings-off={mathtools-colon,mathtools-overbracket}]{unicode-math}
\usepackage{realscripts}
  
% https://www.overleaf.com/learn/latex/Questions/Which%20OTF%20or%20TTF%20fonts%20are%20supported%20via%20fontspec%3F#Latin-script_Fonts
% Font sampler: https://www.overleaf.com/articles/fontspec-all-the-fonts/hjrpnxhrrtxc
% font recommendations https://practicaltypography.com/free-fonts.html
\usepackage{lmodern} % this is loaded by default in unicode-math
\setmainfont{IBM Plex Serif}
\setsansfont{IBM Plex Sans}
\setmonofont{IBM Plex Mono}
\setmonofont{Source Code Pro}
% Needs unicode-math
\setmathfont{Asana Math}


% http://latexcolor.com/
\usepackage{xcolor}
\colorlet{ourcyan}{cyan!10}
\colorlet{darkercyan}{cyan!70}
\definecolor{wine}{HTML}{722f37}
\definecolor{persianplum}{HTML}{701c1c}
% Barevné nadpisy
\setkomafont{disposition}{\color{persianplum}\bfseries}

% packages and setting for code formating
\usepackage{listings} % https://www.overleaf.com/learn/latex/Code_listing
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codeblue}{rgb}{0,0.5,1}
\definecolor{codeorange}{rgb}{1,0.5,0}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{codeorange},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codeblue},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstdefinestyle{mystyle2}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{codeorange},
    %numberstyle=\tiny\color{codegray},
    stringstyle=\color{codeblue},
    basicstyle=\ttfamily\normalsize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    %numbers=false,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\usepackage{graphicx}
\usepackage{csquotes}

\usepackage{lscape}     % Landscape orientace pro velké tabulky
\usepackage{braket}

% Better footnote positioning
% https://mirrors.nic.cz/tex-archive/macros/latex/contrib/footmisc/footmisc.pdf
% Odsazeni footnote od horizontální čáry
\addtolength{\footnotesep}{2pt}
% Větší odsazení footnote od hlavního textu
% https://tex.stackexchange.com/questions/371138/change-space-between-footnote-line-and-main-text
\addtolength{\skip\footins}{8pt plus 4pt}
\usepackage[hang]{footmisc}
\setlength{\footnotemargin}{2mm}

% Inline fractions
\newcommand{\nicefrac}[2]{#1/#2}
% TODO: get rid of nicefrac in favour of inline frac
\newcommand{\inlinefrac}[2]{#1/#2}

% sazeni jednotek
\usepackage{siunitx}
\sisetup{
exponent-product = \cdot,
inter-unit-product = \, ,
%inter-unit-product = \ensuremath{{}\cdot{}},
output-decimal-marker = {,},
group-separator = \,,
group-minimum-digits = 4
}
\DeclareSIUnit{\kcal}{kcal}
\DeclareSIUnit{\ev}{eV}
\DeclareSIUnit{\eV}{eV}
\DeclareSIUnit{\angstrom}{Å}

% Vylepseni tabulek
\usepackage{multicol} % slouceni sloupcu v tabulce
\usepackage{multirow} % slouceni radku v tabulce
\usepackage{rotating} % rotace tabulky
\usepackage{booktabs} % lepsi vzhled tabulek

\usepackage[version=4]{mhchem} % sázení chemických vzorců
% Maybe we could use this for MO diagrams!
% https://www.overleaf.com/learn/latex/Molecular_orbital_diagrams
% \usepackage{MODiagram}

% puntik radikalu 
\usepackage{chemformula}


% here is a nice documentation for tcolorbox
% https://www.overleaf.com/latex/examples/drawing-coloured-boxes-using-colorbox/pvknncpjyfbp#.VmjpHx8SprQ1
\usepackage{tcolorbox}
\tcbuselibrary{breakable,skins} %boxes over more pages

%%%%%%% DEFINICE BOXIKU %%%%%%
\newenvironment{ourbox}[1]
{
\medskip
\begin{tcolorbox}[breakable,width=\textwidth,title={\sffamily \large \textbf{#1}},colback=cyan!5!white,colframe=cyan!80!black, coltitle=white,boxrule=0.25mm,toptitle=1mm,bottomtitle=1mm]
}
{
\end{tcolorbox}
}

\newenvironment{ourbox-BW}[1]
{
\medskip
\begin{tcolorbox}[breakable,width=\textwidth,title={\sffamily \large \textbf{#1}},colback=gray!20!white,colframe=black, coltitle=white,boxrule=0.25mm,toptitle=1mm,bottomtitle=1mm]
}
{
\end{tcolorbox}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% https://www.overleaf.com/learn/latex/page_size_and_margins
% http://mirrors.ibiblio.org/CTAN/macros/latex/contrib/geometry/geometry.pdf
% \usepackage[ paperheight = 240mm, paperwidth = 170mm,  % or: "paper=a4paper"
\usepackage[ paperheight = 297mm, paperwidth = 210mm,  % or: "paper=a4paper"
             % layoutheight = 200mm, layoutwidth = 138mm,
             % layoutvoffset = 12mm, layouthoffset = 16mm,
             % margin=0pt,
             left = 20mm,
             right = 20mm,
             top = 25mm,
             bottom = 25mm,
             footskip = 24pt,
             marginparwidth=0pt,
             marginparsep=0pt,
             headheight=8mm,
             headsep=7pt,
             showframe = false, showcrop = false]{geometry}


% Popisky obrazku a tabulek
% http://ftp.cvut.cz/tex-archive/macros/latex/contrib/caption/caption-eng.pdf
\usepackage{caption}   
\captionsetup{labelfont=bf}         % tucne "Obr." a "Tab.'
\captionsetup{format=plain}         % normal par justification
\captionsetup{width=0.9\textwidth}  % úprava šířky popisků
\captionsetup{font=small}           % mensi font u popisku
\captionsetup[figure]{name=Obr.}

% Vektory tucne a ne italikou
% definice fungujici i pro recke symboly, viz
% https://tex.stackexchange.com/questions/3535/bold-math-automatic-choice-between-mathbf-and-boldsymbol-for-latin-and-greek
%\renewcommand{\vec}[1]{\boldsymbol{\mathbf{#1}}}

% Vektory Bold, sans-serif, italic (jako v Atkinsovi)
% Unicode math redefines\vec at beginning of document! Hence this, per:
% https://tex.stackexchange.com/a/457845
% symbssfit per unicode-math documentation

% Vektory tucnou kurzivou!!!
% \AtBeginDocument{\renewcommand{\vec}[1]{\symbfsfit{#1}}}
% \renewcommand{\boldsymbol}[1]{\symbf{#1}}

% prikaz na vykresleni diferencialu
% from http://tex.stackexchange.com/questions/60545/should-i-mathrm-the-d-in-my-integrals
\newcommand\dd{\mathop{}\!\mathrm{d}} 

% zkrácený výraz pro parciální derivaci
\newcommand{\pd}{\partial}

\usepackage{svg}
\usepackage{capt-of}

\newcommand{\dv}[2]{\frac{\dd #1}{\dd #2}}
\newcommand{\ddv}[2]{\frac{\dd^2 #1}{\dd #2^2}}


% zkraceny vyraz pro hmotnost elektronu
\newcommand{\me}{m_{\mathrm{e}}}

% magnetické spinové číslo elektronu
\newcommand{\ms}{m_{\mathrm{s}}}
\newcommand{\msi}[1]{m_{\mathrm{s}#1}}

% zkraceny vyraz pro exponencialu
\newcommand{\ee}{\mathrm{e}}

% Stojate pi
% https://tex.stackexchange.com/questions/219975/how-to-get-non-italic-greek-symbols-with-ams-packages
% Somehow this does not seem to work, probably because of unicode-math
\renewcommand{\pi}{\uppi}

% Kdyz takto mame exponencialu, tak stejne by mela byt imaginarni jednotka
% https://tex.stackexchange.com/questions/86128/how-should-imaginary-numbers-be-typeset
%\newcommand{\ii}{i}
\newcommand{\ii}{\mathrm{i}}
\newcommand{\e}{\mathrm{e}}


%Kolafova zavorka pres 3 radky
\newcommand*\twobrace{$\displaystyle\left.\rule{0pt}{3.1ex}\right\}$}
\newcommand*\threebrace{$\displaystyle\left.\rule{0pt}{5ex}\right\}$}


% procedura definujici nove prostredi "priklad"
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Autor: Vit Svoboda, Praha 2014
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcounter{poradi} % novy citac pro cislo prikladu
\newcounter{CP} % novy citac pro cislo v labelu
\newcommand{\novepocitadlo}{\stepcounter{poradi}\theporadi} % realizace pocitadla pro cislo prikladu 
\newcommand{\prikladlabel}[1]{\refstepcounter{CP}\label{#1}} % novy prikaz pro label, ktery resi spravny odkaz \ref

%prikaz, který vypise "Priklad xy"
\definecolor{bleudefrance}{rgb}{0.19, 0.55, 0.91}
\newcommand{\novynadpis}{
{
  \color{bleudefrance}
  \normalsize \sffamily {Exercise \novepocitadlo}
} 
  \vspace{0.1cm} \prikladlabel{\theporadi}
} 

\newenvironment{priklad}
{
\vspace{4pt plus 2pt}
\begin{tcolorbox}[
empty,
breakable,
%colback=white,
%colbacktitle=white,
%colframe=gray,
%boxrule=0pt,
borderline west={1.5pt}{0pt}{gray}
]
\novynadpis\\ \noindent
}
{
\end{tcolorbox}
\vspace{4pt plus 2pt}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% cislovani rovnic, obrazku a prikladu v kazde sekci zvlast
\numberwithin{equation}{chapter} 
\numberwithin{figure}{chapter}
\numberwithin{poradi}{chapter}
\numberwithin{CP}{chapter}
\graphicspath{{obrazky/}{../obrazky/}} % adresar pro obrazky

% kontrola vdov a sirotku
% defaultlines=2 is latex default
\usepackage[defaultlines=2,all]{nowidow}

%lepsi pozicovani
\usepackage{float}

\usepackage{url}   %pro snadnou tvorbu URL adres

\usepackage[shortcuts]{extdash}

\usepackage[
unicode,
xetex,
pdfa=true,
pdfencoding=unicode,
unicode=true,
pdftitle={Quantum Mechanics: Hands On},
pdfauthor={Jiří Janoš, Tomáš Jíra},
colorlinks=true,
bookmarks=true,
breaklinks=true,
urlcolor=red,
citecolor=blue,
linkcolor=blue,
unicode=true,
pdfstartview=FitV]{hyperref}


%/nastaveni VZHLEDU PROGRAMOVACÍCH JAZYKŮ
% See https://cs.overleaf.com/learn/latex/Code_listing
% nasledujici styl nema keywords ani jinou syntax,
% vlastně je to jen verbatim prostředí s šedým pozadím
% TODO: asi by se dalo udělat jednodušeji bez lstlistings
\usepackage{listings}
\lstdefinestyle{bezsyntaxe}{
    basicstyle=\ttfamily,
    backgroundcolor=\color{gray!15},
    frameround=fttt,
    breaklines=true,
    tabsize=5,
    frame=tb, % lines above and below 
    framexleftmargin=3pt,
    framextopmargin=4pt,
    framexbottommargin=4pt, 
    framerule=1pt,
    rulecolor=\color{gray!15}, % colored in a slightly darker gray
    breakatwhitespace=true,
    numbers=none,
    sensitive=false,
    showstringspaces=false,
  %  comment=[l]{\#},
}

% Not sure if we want this. No margin for lists
% https://tex.stackexchange.com/questions/295153/vertical-spacing-in-koma-script
\usepackage{enumitem}
\setlist{leftmargin=*}
% This is to get rid of the warning
% https://tex.stackexchange.com/a/514194
\setlist{labelwidth=*}


% https://www.overleaf.com/learn/latex/Glossaries#Acronyms
% just \printglossary as described broke so I used fix introduced herehttps://stackoverflow.com/questions/66924808/unable-to-show-the-glossary-with-printglossary-in-latex
\usepackage[acronym]{glossaries}
% \makeglossaries
\makenoidxglossaries